# Description: Simple GTK/command line TCP/IP packet generator
# URL:         http://gspoof.sourceforge.net/
# Depends on:  gtk libnet

name=gspoof
version=3.2
release=1
source="http://gspoof.sourceforge.net/src/gspoof-$version.tar.gz
	configure.ac.patch
	gfuncts.c.patch
	ginclude.h.patch
	gtk.c.patch
	interface.c.patch"

build() {
	export CFLAGS="$CFLAGS -I/usr/include/cairo"

	cd gspoof-$version

	patch -p0 -i $SRC/configure.ac.patch
	patch -p1 -i $SRC/gfuncts.c.patch
	patch -p1 -i $SRC/ginclude.h.patch
	patch -p1 -i $SRC/gtk.c.patch
	#patch -p0 -i $SRC/interface.c.patch

	#aclocal
	#autoconf -i
	./configure --prefix=/usr

	make V=1
	#make DESTDIR=$PKG install (broken)

	install -m 0755 -D gspoof $PKG/usr/bin/gspoof
	install -m 0644 -D pixmap/icon.png $PKG/usr/share/pixmaps/$name.png
}
