# Description: Find usernames across social networks
# URL:         https://github.com/sherlock-project/sherlock
# Depends on:  py3-pip

name=sherlock
version=0.16.0
release=1
source="$name.sh
	revdep.$name"

build() {
	export TMPDIR="$PKGMK_WORK_DIR"

	mkdir -p $PKG/usr/bin $PKG/opt/$name

	/usr/bin/pip3 install "sherlock-project==$version"  \
		--use-pep517 --target $PKG/opt/$name

	install -m 0755 -D $SRC/$name.sh $PKG/usr/bin/$name
	install -m 0644 -D $SRC/revdep.$name $PKG/etc/revdep.d/$name

	# remove junk
	#rm -r $PKG/opt/$name/*.dist-info (required)
	rm -r $PKG/opt/$name/pandas/tests/ \
	      $PKG/opt/$name/numpy/*/tests/ \

	/usr/bin/python3     -m compileall $PKG
	/usr/bin/python3 -O  -m compileall $PKG
	/usr/bin/python3 -OO -m compileall $PKG
}
