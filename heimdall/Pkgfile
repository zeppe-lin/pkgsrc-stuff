# Description: Flash firmwares on Samsung Galaxy S devices
# URL:         https://gitlab.com/BenjaminDobell/Heimdall
# Depends on:  libusb

# Maintainer notes on dependencies:
#   DISABLE_FRONTEND=ON: Useless GUI, needs qt5 (disabled)

name=heimdall
version=1.4.2
release=1
source=https://gitlab.com/BenjaminDobell/Heimdall/-/archive/v$version/Heimdall-v$version.tar.bz2

build() {
	export CXXFLAGS="$CXXFLAGS -DNDEBUG"

	cmake -S Heimdall-v$version -B build -D DISABLE_FRONTEND=ON
	cmake --build build -v

	install -m 0755 -Dt $PKG/usr/bin build/bin/$name
}
