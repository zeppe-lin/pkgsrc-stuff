# Description: Low-Level Interface to lzma compression library
# URL:         https://metacpan.org/pod/Compress::Raw::Lzma
# Depends on:  perl

# XXX: Ignore Pod::Markdown warnings - it's a build-only dep used only for
# GitHub README generation (see private/MakeUtil.pm).

name=p5-compress-raw-lzma
version=2.214
release=1
source=https://cpan.metacpan.org/authors/id/P/PM/PMQS/Compress-Raw-Lzma-$version.tar.gz

build() {
	cd Compress-Raw-Lzma-$version

	command -v finddepsdistmeta && finddepsdistmeta
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor

	make OPTIMIZE="$CFLAGS"
	make DESTDIR=$PKG install

	# remove junk and empty dirs
	find $PKG -depth \
		\( -type f -name perllocal.pod \
			-o -name '*.bs' \
			-o -name .packlist \
		\) -delete \
		-o -type d -empty -delete
}
